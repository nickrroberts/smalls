/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var t={56:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},72:t=>{"use strict";var e=[];function n(t){for(var n=-1,o=0;o<e.length;o++)if(e[o].identifier===t){n=o;break}return n}function o(t,o){for(var s={},a=[],r=0;r<t.length;r++){var c=t[r],l=o.base?c[0]+o.base:c[0],d=s[l]||0,p="".concat(l," ").concat(d);s[l]=d+1;var u=n(p),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==u)e[u].references++,e[u].updater(f);else{var h=i(f,o);o.byIndex=r,e.splice(r,0,{identifier:p,updater:h,references:1})}a.push(p)}return a}function i(t,e){var n=e.domAPI(e);n.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var s=o(t=t||[],i=i||{});return function(t){t=t||[];for(var a=0;a<s.length;a++){var r=n(s[a]);e[r].references--}for(var c=o(t,i),l=0;l<s.length;l++){var d=n(s[l]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}s=c}}},113:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},208:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var o=n(601),i=n.n(o),s=n(314),a=n.n(s)()(i());a.push([t.id,"@import url(https://fonts.googleapis.com/css2?family=Black+Ops+One&display=swap);"]),a.push([t.id,"@import url(https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap);"]),a.push([t.id,"h1, h2 {\n    font-family: \"Black Ops One\", system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n    color: #fff;\n}\n\np, button {\n    font-family: \"Share Tech Mono\", monospace, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n}\n\n\np, ul, li {\n   margin:0;\n   padding:0;\n}\n\nbody {\n    font-family: Arial, sans-serif;\n    padding: 3rem;\n    background-color: #000;    \n}\n\n.container {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(700px, 1fr));\n    gap: 3rem;\n}\n\n.board-container {\n    display: grid;\n    grid-template-rows: auto 1fr;\n    gap: 1rem;\n}\n\n.board-and-ships {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); /* board takes ~75%, ships ~25% */\n    gap: 1rem;\n}\n\n.board-and-ships button {\n    width: fit-content;\n    margin: 0 auto;\n}\n\n.board {\n    display: grid;\n    grid-template-columns: repeat(10, 1fr);\n    aspect-ratio: 1/1 ;\n    width: 100%;\n    max-width: 600px;\n    border: 1px solid #00FF66; \n    border-radius: 5px;;          \n}\n\n.cell {\n    aspect-ratio: 1 / 1;\n    border: 1px solid #00FF66;\n    display: flex;             \n    align-items: center;\n    justify-content: center;\n    background-color: #000;\n}\n\n.ships {\n    display: flex;\n    flex-direction: column;\n    gap: 2rem;\n    background-color: #2e2e2e;\n    border-radius: 5px;\n    padding: 1rem;\n}\n\n.highlight {\n    background-color: #00FF66;\n}\n\n.ship-img p {\n    color: #fff;\n}\n\n.ship-img {\n    margin: 0 auto;\n    text-align: center;\n    padding: 0.5rem;\n}\n\n\n.selected {\n    background-color: rgb(236, 236, 236);\n    border-radius: 5px;\n}\n\n.selected p {\n    color: #000;\n}\n\n.ship-img.placed {\n    position: relative;\n  }\n  \n.ship-img.placed::after {\ncontent: '';\nposition: absolute;\ntop: 0; left: 0;\nwidth: 100%;\nheight: 100%;\nbackground-color: #00ff6643; /* Green overlay */\npointer-events: none;\nborder-radius: 4px;\n}\n\n.center-toast {\n    top: 50% !important;\n    transform: translateY(-50%);\n  }\n\n.cell img.hit-icon,\n.cell img.miss-icon {\n  width: 100%;\n  height: 100%;\n  object-fit: contain;\n  display: block;\n}\n\n@media (max-width: 967px) {\n    .container {\n        grid-template-columns: 1fr;\n    }\n    .board-and-ships {\n        grid-template-columns: 1fr;\n    }\n    .board,\n    .ships {\n        width: 100% !important;\n        max-width: none !important;\n        margin: 0 auto;\n    }\n}",""]);const r=a},314:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",o=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),o&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),o&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,o,i,s){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(o)for(var r=0;r<this.length;r++){var c=this[r][0];null!=c&&(a[c]=!0)}for(var l=0;l<t.length;l++){var d=[].concat(t[l]);o&&a[d[0]]||(void 0!==s&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=s),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),i&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=i):d[4]="".concat(i)),e.push(d))}},e}},455:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var o=n(601),i=n.n(o),s=n(314),a=n.n(s)()(i());a.push([t.id,"/*!\n * Toastify js 1.12.0\n * https://github.com/apvarun/toastify-js\n * @license MIT licensed\n *\n * Copyright (C) 2018 Varun A P\n */\n\n.toastify {\n    padding: 12px 20px;\n    color: #ffffff;\n    display: inline-block;\n    box-shadow: 0 3px 6px -1px rgba(0, 0, 0, 0.12), 0 10px 36px -4px rgba(77, 96, 232, 0.3);\n    background: -webkit-linear-gradient(315deg, #73a5ff, #5477f5);\n    background: linear-gradient(135deg, #73a5ff, #5477f5);\n    position: fixed;\n    opacity: 0;\n    transition: all 0.4s cubic-bezier(0.215, 0.61, 0.355, 1);\n    border-radius: 2px;\n    cursor: pointer;\n    text-decoration: none;\n    max-width: calc(50% - 20px);\n    z-index: 2147483647;\n}\n\n.toastify.on {\n    opacity: 1;\n}\n\n.toast-close {\n    background: transparent;\n    border: 0;\n    color: white;\n    cursor: pointer;\n    font-family: inherit;\n    font-size: 1em;\n    opacity: 0.4;\n    padding: 0 5px;\n}\n\n.toastify-right {\n    right: 15px;\n}\n\n.toastify-left {\n    left: 15px;\n}\n\n.toastify-top {\n    top: -150px;\n}\n\n.toastify-bottom {\n    bottom: -150px;\n}\n\n.toastify-rounded {\n    border-radius: 25px;\n}\n\n.toastify-avatar {\n    width: 1.5em;\n    height: 1.5em;\n    margin: -7px 5px;\n    border-radius: 2px;\n}\n\n.toastify-center {\n    margin-left: auto;\n    margin-right: auto;\n    left: 0;\n    right: 0;\n    max-width: fit-content;\n    max-width: -moz-fit-content;\n}\n\n@media only screen and (max-width: 360px) {\n    .toastify-right, .toastify-left {\n        margin-left: auto;\n        margin-right: auto;\n        left: 0;\n        right: 0;\n        max-width: fit-content;\n    }\n}\n",""]);const r=a},540:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},601:t=>{"use strict";t.exports=function(t){return t[1]}},659:t=>{"use strict";var e={};t.exports=function(t,n){var o=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},736:function(t){var e,n;e=this,n=function(t){var e=function(t){return new e.lib.init(t)};function n(t,e){return e.offset[t]?isNaN(e.offset[t])?e.offset[t]:e.offset[t]+"px":"0px"}function o(t,e){return!(!t||"string"!=typeof e||!(t.className&&t.className.trim().split(/\s+/gi).indexOf(e)>-1))}return e.defaults={oldestFirst:!0,text:"Toastify is awesome!",node:void 0,duration:3e3,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"toastify-top",positionLeft:!1,position:"",backgroundColor:"",avatar:"",className:"",stopOnFocus:!0,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,ariaLive:"polite",style:{background:""}},e.lib=e.prototype={toastify:"1.12.0",constructor:e,init:function(t){return t||(t={}),this.options={},this.toastElement=null,this.options.text=t.text||e.defaults.text,this.options.node=t.node||e.defaults.node,this.options.duration=0===t.duration?0:t.duration||e.defaults.duration,this.options.selector=t.selector||e.defaults.selector,this.options.callback=t.callback||e.defaults.callback,this.options.destination=t.destination||e.defaults.destination,this.options.newWindow=t.newWindow||e.defaults.newWindow,this.options.close=t.close||e.defaults.close,this.options.gravity="bottom"===t.gravity?"toastify-bottom":e.defaults.gravity,this.options.positionLeft=t.positionLeft||e.defaults.positionLeft,this.options.position=t.position||e.defaults.position,this.options.backgroundColor=t.backgroundColor||e.defaults.backgroundColor,this.options.avatar=t.avatar||e.defaults.avatar,this.options.className=t.className||e.defaults.className,this.options.stopOnFocus=void 0===t.stopOnFocus?e.defaults.stopOnFocus:t.stopOnFocus,this.options.onClick=t.onClick||e.defaults.onClick,this.options.offset=t.offset||e.defaults.offset,this.options.escapeMarkup=void 0!==t.escapeMarkup?t.escapeMarkup:e.defaults.escapeMarkup,this.options.ariaLive=t.ariaLive||e.defaults.ariaLive,this.options.style=t.style||e.defaults.style,t.backgroundColor&&(this.options.style.background=t.backgroundColor),this},buildToast:function(){if(!this.options)throw"Toastify is not initialized";var t=document.createElement("div");for(var e in t.className="toastify on "+this.options.className,this.options.position?t.className+=" toastify-"+this.options.position:!0===this.options.positionLeft?(t.className+=" toastify-left",console.warn("Property `positionLeft` will be depreciated in further versions. Please use `position` instead.")):t.className+=" toastify-right",t.className+=" "+this.options.gravity,this.options.backgroundColor&&console.warn('DEPRECATION NOTICE: "backgroundColor" is being deprecated. Please use the "style.background" property.'),this.options.style)t.style[e]=this.options.style[e];if(this.options.ariaLive&&t.setAttribute("aria-live",this.options.ariaLive),this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)t.appendChild(this.options.node);else if(this.options.escapeMarkup?t.innerText=this.options.text:t.innerHTML=this.options.text,""!==this.options.avatar){var o=document.createElement("img");o.src=this.options.avatar,o.className="toastify-avatar","left"==this.options.position||!0===this.options.positionLeft?t.appendChild(o):t.insertAdjacentElement("afterbegin",o)}if(!0===this.options.close){var i=document.createElement("button");i.type="button",i.setAttribute("aria-label","Close"),i.className="toast-close",i.innerHTML="&#10006;",i.addEventListener("click",function(t){t.stopPropagation(),this.removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}.bind(this));var s=window.innerWidth>0?window.innerWidth:screen.width;("left"==this.options.position||!0===this.options.positionLeft)&&s>360?t.insertAdjacentElement("afterbegin",i):t.appendChild(i)}if(this.options.stopOnFocus&&this.options.duration>0){var a=this;t.addEventListener("mouseover",(function(e){window.clearTimeout(t.timeOutValue)})),t.addEventListener("mouseleave",(function(){t.timeOutValue=window.setTimeout((function(){a.removeElement(t)}),a.options.duration)}))}if(void 0!==this.options.destination&&t.addEventListener("click",function(t){t.stopPropagation(),!0===this.options.newWindow?window.open(this.options.destination,"_blank"):window.location=this.options.destination}.bind(this)),"function"==typeof this.options.onClick&&void 0===this.options.destination&&t.addEventListener("click",function(t){t.stopPropagation(),this.options.onClick()}.bind(this)),"object"==typeof this.options.offset){var r=n("x",this.options),c=n("y",this.options),l="left"==this.options.position?r:"-"+r,d="toastify-top"==this.options.gravity?c:"-"+c;t.style.transform="translate("+l+","+d+")"}return t},showToast:function(){var t;if(this.toastElement=this.buildToast(),!(t="string"==typeof this.options.selector?document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||"undefined"!=typeof ShadowRoot&&this.options.selector instanceof ShadowRoot?this.options.selector:document.body))throw"Root element is not defined";var n=e.defaults.oldestFirst?t.firstChild:t.lastChild;return t.insertBefore(this.toastElement,n),e.reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout(function(){this.removeElement(this.toastElement)}.bind(this),this.options.duration)),this},hideToast:function(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this.removeElement(this.toastElement)},removeElement:function(t){t.className=t.className.replace(" on",""),window.setTimeout(function(){this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),t.parentNode&&t.parentNode.removeChild(t),this.options.callback.call(t),e.reposition()}.bind(this),400)}},e.reposition=function(){for(var t,e={top:15,bottom:15},n={top:15,bottom:15},i={top:15,bottom:15},s=document.getElementsByClassName("toastify"),a=0;a<s.length;a++){t=!0===o(s[a],"toastify-top")?"toastify-top":"toastify-bottom";var r=s[a].offsetHeight;t=t.substr(9,t.length-1),(window.innerWidth>0?window.innerWidth:screen.width)<=360?(s[a].style[t]=i[t]+"px",i[t]+=r+15):!0===o(s[a],"toastify-left")?(s[a].style[t]=e[t]+"px",e[t]+=r+15):(s[a].style[t]=n[t]+"px",n[t]+=r+15)}return this},e.lib.init.prototype=e.lib,e},t.exports?t.exports=n():e.Toastify=n()},825:t=>{"use strict";t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,i&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleTagTransform(o,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var s=e[o]={id:o,exports:{}};return t[o].call(s.exports,s,s.exports,n),s.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.p="/smalls/battleship/",n.nc=void 0,(()=>{"use strict";var t=n(72),e=n.n(t),o=n(825),i=n.n(o),s=n(659),a=n.n(s),r=n(56),c=n.n(r),l=n(540),d=n.n(l),p=n(113),u=n.n(p),f=n(208),h={};h.styleTagTransform=u(),h.setAttributes=c(),h.insert=a().bind(null,"head"),h.domAPI=i(),h.insertStyleElement=d();e()(f.A,h);f.A&&f.A.locals&&f.A.locals;const m=n.p+"0a05418937674f096b5a.png",g=n.p+"27928a4a1d8429efe5a6.png",y=n.p+"58b9e3a50b2ca28588aa.png",v=n.p+"44f3174c79efcff03d39.png",b=n.p+"547d4fdb8cada3c57b63.png";function w(t){let e=0,n=!1,o=null,i=null,s=null;switch(t){case"carrier":s=m,i=5;break;case"battleship":s=g,i=4;break;case"cruiser":s=y,i=3;break;case"submarine":s=v,i=3;break;case"destroyer":s=b,i=2;break;default:throw new Error("Must pass a valid ship type to the Ship factory.")}return{image:s,length:i,type:t,hit:()=>e+=1,getHits:()=>e,isPlaced:()=>n,place(t){o=t,n=!0},getLocation:()=>o,isSunk(){return this.getHits()>=this.length}}}function x(t){const e=t,n=function(){const t={carrier:w("carrier"),battleship:w("battleship"),cruiser:w("cruiser"),submarine:w("submarine"),destroyer:w("destroyer")},e=[];function n(e){for(let n in t)if(!0===t[n].isPlaced())for(let o of t[n].getLocation())for(let t of e)if(t[0]===o[0]&&t[1]===o[1])return n;return!1}return{placeShip(e,o,i){if(!0===t[e].isPlaced())throw new Error("Invalid! Can only place one of each ship type.");const s=function(t,e,n){const o=[];for(let i=0;i<e;i++)"vert"===n&&o.push([t[0],t[1]+i]),"horiz"===n&&o.push([t[0]+i,t[1]]);return o}(o,t[e].length,i);for(let t of s)if(t[0]>10||t[1]>10)throw new Error("Invalid placement! Ship must be entirely on the game board.");if(n(s))throw new Error("Invalid placement! Cannot place a ship on another ship.");return t[e].place(s),`${e} placed at ${s}`},receiveAttack(o){for(let t of e)if(t[0]===o[0]&&t[1]===o[1])throw new Error("Invalid move. You've already hit that spot.");e.push(o);const i=n([o]);return i?(t[i].hit(),t[i].isSunk()?{status:"Hit",sunk:!0,type:t[i].type}:{status:"Hit",sunk:!1}):{status:"Miss"}},getShipDetails:e=>t[e],getShipCoords:e=>t[e].getLocation(),getBoardStatus(){let e=0,n=0;for(let o in t)t[o].isPlaced()&&e++,t[o].isSunk()&&n++;return{placed:e,sunk:n}}}}();return{playerType:e,getBoard:()=>n,fire:(t,e)=>t.getBoard().receiveAttack(e),place:(t,e,o)=>n.placeShip(t,e,o),checkWin(t){const e=t.getBoard().getBoardStatus();return e.placed>0&&e.placed===e.sunk}}}var k=n(736),E=n(455),L={};L.styleTagTransform=u(),L.setAttributes=c(),L.insert=a().bind(null,"head"),L.domAPI=i(),L.insertStyleElement=d();e()(E.A,L);E.A&&E.A.locals&&E.A.locals;const T=n.p+"c6bbc8f7c60673857000.svg",C=n.p+"e6d71152fa4d1d3a0336.svg";let S=null,M="horiz",N="placement";const I=new Set,O=new Set,$=[],A=document.getElementById("human"),F=document.getElementById("computer");function B(t,e){const n=parseInt(t.target.dataset.row),o=parseInt(t.target.dataset.col),i=document.querySelector(`#computer .cell[data-row="${n}"][data-col="${o}"]`);i&&i.classList[e?"add":"remove"]("highlight")}function H(t){B(t,!0)}function P(t){B(t,!1)}function z(t){const e=t?"addEventListener":"removeEventListener";F[e]("mouseover",H),F[e]("mouseout",P),F[e]("click",et)}function j(t,e){const n=document.createElement("div");return n.classList.add("cell"),n.id=`${t},${e}`,n.dataset.row=t,n.dataset.col=e,n}const R={duration:250,gravity:"top",position:"center",style:{background:"#00FF66",color:"#000",fontFamily:"Share Tech Mono, monospace",fontSize:"1.5rem",padding:"1.25rem 2rem",borderRadius:"5px"},className:"center-toast"},W=[];let q=!1;function D(t,e={}){W.push({message:t,overrides:e}),q||U()}function U(){if(!W.length)return void(q=!1);q=!0;const{message:t,overrides:e}=W.shift();k({...R,...e,text:t}).showToast(),setTimeout((()=>{const t=document.getElementById("new-game-btn");t&&t.addEventListener("click",(()=>{location.reload()}))}),100),setTimeout(U,e.duration??R.duration??2e3)}let V=x("Human"),Y=x("Computer");const _=["carrier","battleship","cruiser","submarine","destroyer"],G=document.getElementById("human-ships"),J=document.getElementById("computer-ships"),K=document.createElement("button");function Q(t,e){for(let n of _){const o=document.createElement("div");o.id=`${t.playerType.toLowerCase()}-${n}`;const i=document.createElement("img"),s=document.createElement("p");i.src=t.getBoard().getShipDetails(n).image,s.textContent=n.charAt(0).toUpperCase()+n.slice(1).toLowerCase(),t===V&&i.addEventListener("click",(()=>{o.classList.add("selected"),X(n)})),o.classList.add("ship-img"),o.append(i,s),e.appendChild(o)}}function X(t){S=t}function Z(){document.querySelectorAll("#human .cell.highlight").forEach((t=>t.classList.remove("highlight")))}function tt(t){N=t,"placement"!==N?("playerTurn"===N&&(z(!0),D("Your turn!",{className:""})),"computerTurn"===N&&(z(!1),setTimeout((()=>et()),500)),"gameOver"===N&&(D('\n            <div style="text-align: center;">\n              <strong>Game Over!</strong><br>\n              <button id="new-game-btn" style="\n                margin-top: 0.5rem;\n                padding: 0.5rem 1rem;\n                font-size: 1rem;\n                font-family: \'Share Tech Mono\', monospace;\n                background: #000;\n                color: #00FF66;\n                border: 2px solid #00FF66;\n                border-radius: 6px;\n                cursor: pointer;\n              ">New Game</button>\n            </div>\n          ',{duration:-1,escapeMarkup:!1}),setTimeout((()=>{const t=document.getElementById("new-game-btn");t&&t.addEventListener("click",(()=>{localStorage.removeItem("battleshipState"),location.reload()}))}),100))):z(!1)}function et(t){if("gameOver"===N)return;let e,n,o,i,s;if("playerTurn"===N){const o=t.target.closest(".cell");if(!o)return;e=parseInt(o.dataset.row),n=parseInt(o.dataset.col)}else{for(;$.length>0&&O.has(`${$[0][0]},${$[0][1]}`);)$.shift();if($.length>0)[n,e]=$.shift();else do{e=Math.floor(10*Math.random())+1,n=Math.floor(10*Math.random())+1}while(O.has(`${n},${e}`))}"playerTurn"===N?(o=V,i=Y):(o=Y,i=V);try{s=o.fire(i,[n,e])}catch(t){return console.error(t),void D(t.message,{className:""})}O.add(`${n},${e}`);const a=o===V?"#computer":"#human",r=document.querySelector(`${a} .cell[data-row="${e}"][data-col="${n}"]`);if("Hit"===s.status){if(D("Hit!",{className:""}),r){r.classList.remove("highlight"),r.innerHTML="";const t=document.createElement("img");t.src=T,t.alt="Hit",t.classList.add("hit-icon"),r.appendChild(t)}if(s.sunk){D(`Player ${o.playerType} sunk a ${s.type}!`);const t=o===V?"computer":"human",e=document.getElementById(`${t}-${s.type}`);e&&(e.style.backgroundColor="#FF0000");i.getBoard().getShipCoords(s.type).forEach((([t,e])=>{const n=document.querySelector(`#${i.playerType.toLowerCase()} .cell[data-row="${e}"][data-col="${t}"]`);n&&(n.innerHTML="",n.style.backgroundColor="#FF0000")}))}}else if(D("Miss!",{className:""}),r){r.classList.remove("highlight"),r.innerHTML="";const t=document.createElement("img");t.src=C,t.alt="Miss",t.classList.add("miss-icon"),r.appendChild(t)}if(o===Y&&"Hit"===s.status)if(s.sunk)$.length=0;else{[[n+1,e],[n-1,e],[n,e+1],[n,e-1]].forEach((([t,e])=>{t>=1&&t<=10&&e>=1&&e<=10&&!O.has(`${t},${e}`)&&$.push([t,e])}))}if(o.checkWin(i))return D(`🎉 That's game over! ${o.playerType} is the winner!`,{className:"",duration:3e3}),void tt("gameOver");tt(o===V?"computerTurn":"playerTurn")}K.textContent="🔄 Rotate ship",G.prepend(K),A.addEventListener("mouseover",(function(t){if(!S||I.has(S)||!t.target.classList.contains("cell"))return;const e=parseInt(t.target.dataset.row),n=parseInt(t.target.dataset.col),o=V.getBoard().getShipDetails(S).length;for(let t=0;t<o;t++){let o;o="horiz"===M?document.querySelector(`#human .cell[data-row="${e}"][data-col="${n+t}"]`):document.querySelector(`#human .cell[data-row="${e+t}"][data-col="${n}"]`),o&&o.classList.add("highlight")}})),A.addEventListener("mouseout",Z),K.addEventListener("click",(function(){M="horiz"===M?"vert":"horiz"})),A.addEventListener("click",(function(t){if(!S||!t.target.classList.contains("cell"))return;const e=parseInt(t.target.dataset.row),n=parseInt(t.target.dataset.col);try{V.place(S,[n,e],M)}catch(t){return void console.log(t.message)}if(document.querySelectorAll("#human .cell.highlight").forEach((t=>t.style.backgroundColor="#0bd200a7")),document.getElementById(`human-${S}`).classList.add("placed"),I.add(S),S=null,Z(),5===V.getBoard().getBoardStatus().placed){D("Battle time!");document.querySelectorAll(".ship-img").forEach((t=>t.classList.remove("placed"))),tt("playerTurn"),G.removeChild(K)}})),D("You are under attack. Deploy your forces!"),document.addEventListener("click",(t=>{const e=t.target.closest(".ship-img");document.querySelectorAll(".ship-img").forEach((t=>{t!==e&&t.classList.remove("selected")}))})),document.addEventListener("DOMContentLoaded",(()=>{for(let t=1;t<=10;t++)for(let e=1;e<=10;e++)A.appendChild(j(t,e)),F.appendChild(j(t,e));Q(V,G),Q(Y,J),_.forEach((t=>{for(;;){const e=Math.floor(10*Math.random())+1,n=Math.floor(10*Math.random())+1,o=Math.random()<.5?"horiz":"vert";try{Y.place(t,[n,e],o);break}catch(e){console.log(`Retrying ${t}:`,e.message)}}})),tt("placement")}))})()})();